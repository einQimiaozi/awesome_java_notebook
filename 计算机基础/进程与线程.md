## 进程和线程的概念
  - 进程是操作系统分配资源的单位，线程是操作系统执行和调度的单位
  - 进程维护自己单独的数据空间(进程上下文)，切换开销大
  - 线程则共享同一个进程中的数据空间，只保留各自的栈空间和程序计数器，切换开销小
  - 进程包含线程，同一个时间下一个(注意是一个)cpu只有一个线程运行
  - 进程的内存空间由操作系统分配，线程共享进程内存空间

## 进程切换
  - 进程的切换本质就是系统内核挂起cpu上运行的进程，恢复之前的某个进程的执行
  - 进程切换的过程变化
     - 保留处理机上下文，包括程序计数器和其他寄存器
     - 更新PCB信息
     - 把进程的PCB移入相应队列，如事件阻塞队列，选择另一个进程执行，并更新其PCB
     - 更新内存管理的数据结构
     - 恢复处理机上下文
     - ### 状态切换
      - 五态模型
      
      ![五态模型](https://s2.ax1x.com/2019/03/31/Aryfbt.png)
      
      - 只有就绪状态和运行状态可以相互切换，其他的都是单向转换
      - 就绪状态通过调度算法转为运行状态，运行状态在自己的cpu时间片用完后会转为就绪状态
      - 运行状态缺少资源时会转为阻塞状态，并且这个“资源”不包括cpu时间片
      
## 进程调度算法
  - ### 批处理系统
    - 批处理系统中没有太多用户操作，调度目标是为了保证吞吐量和周转时间
    - firstcome frist serverd(FCFS):非抢占式调度，先到先来，有利于长作业，不利于短作业，因为短作业要等待前面的长作业运行完毕才能执行
    - short job frist(SJF):非抢占式算法:优先执行短作业，可能会饿死长作业
    - shortest remaining time next(SRTN):抢占式算法，新作业到达时计算当前作业的剩余时间和新作业的完成所需时间谁更短，如果新作业更段则挂起当前作业，运行新的作业
  - ### 交互式系统
    - 交互式系统有大量的用户交互操作，调度目标是快速响应
    - 时间片轮转：基于FCFS，将时间片分配给FCFS队列中的每个任务，每次执行一个任务，该任务时间片用完时由计时器发出中断，进程挂起并被送往队尾
    - 如果时间片太小会导致进程切换频繁，降低算法效率
    - 如果时间片过长，会影响实时性
  - ### 优先级调度
    - 为每个进程分配一个优先级，按优先级进行调度
    - 为了防止优先级低的任务饿死，可以根据时间推移增加等待进程们的优先级
  - ### 多级反馈队列
    - 该算法使用多个优先级不同的队列
    - 例如某个进程的时间片为100,我们把时间片大小重新分配为1,2,4,8.....这样时间片从100个变成了7个
    - 将7个时间片按照从小到大的顺序放入不同的队列里，时间片越小，放入的队列优先级越高，执行任务时先执行优先级高的队列中的任务
    - 当最高优先级队列为空时，将第二优先级队列的优先级提升为最高，后面的以此提升
  - ### 实时系统
    - 实时系统要求一个请求在一个确定时间内得到响应
    - 实时系统分为软实时和硬实时，前者必须满足绝对的截至时间，后者可以容忍一定的超时
    
## PCB(process control block)
  - 进程控制块，是一个操作系统的数据结构描述，是对系统的进程管理的重要依据
  - PCB包含的内容
    - 进程标识符
    - 处理机的信息(通用寄存器，指令计数器，PSW，用户的栈指针)
    - 进程调度信息(进程状态，进程优先级，进程调度所需的其他信息，事件)
    - 进程控制信息(程序的数据地址，资源清单，进程同步和通信机制，链接指针)

## 进程同步
  - 临界区：对临界资源访问的代码段，为了互斥访问临界资源，每个进程在进入临界区之前都要进行检查
  - 同步和互斥：同步指多个进程因为合作产生的制约关系和先后执行关系，互斥指多个进程在同一时刻只有一个进程能进入临界区
  - 信号量：信号量是一个整型变量，有down up两种操作
    - down：信号量大于0,执行-1操作，等于0,进程休眠，等待信号量大于0
    - up：对信号量+1
    - 如果信号量只能为0,1,则变成了互斥量，0表示临界去加锁，1表示临界区解锁
