# OSI七层模型

![arch](https://github.com/einQimiaozi/awesome_java_notebook/blob/main/%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80/Resource/arch.png)

1.物理层：
  - 使用物理硬件(网线之类的)传输电信号，010101010......，也就是所谓的比特流
  
2.数据链路层：
  - 比特流这东西都一堆0101啥的，接收之后不好解读，数据链路层就把这些比特流按照8bit一组(其实就是1字节)分组
  - 多组比特流组一个帧(数据包)
  - 数据包的组成如下：
    - head(18byte，666组成):发送者（源地址，6个字节）接收者（目标地址，6个字节）数据类型（6个字节）
    - data(46-1500byte)：数据本身
  - 源地址和目标地址都是mac地址，mac地址其实就是网卡的物理地址
  - 数据链路层只能在局域网内通信，依靠广播机制(大喊一声我是xxx我要找xxx要xxx，然后在座的各位对号入座)
  - 同时这一层要对比特流封装的帧做数据差错检测和尝试修复
  - 所以这一层的功能是：透明传输，封装成帧，差错检测
  
3.网络层：
  - 数据链路层无法解决广域网传输的问题就要依靠网络层解决
  - 解决的方案就是ip协议
  - 使用网关作为不同局域网之间的代理人，通过网关的ip地址我们可以直接找到目标所在的网关所负责的局域网，然后广播，根据mac地址找到目标，这就是ip协议干的事，但想要知道目标的mac地址，需要使用arp协议
  - arp的原理：使用12个f作为目标地址的mac，然后大喊一声我要获取ip为xxx的xxx的mac地址，然后大家会开始对号入座，如果ip和自己相同就直接返回自己的mac地址，在广域网内目标的ip地址就变为网关的ip地址了
  - 总结一下：使用ip协议找到网关对应的局域网，使用mac地址找到该局域网内我们要找的主机
  
4.传输层：
  - 建立主机和主机之间两个应用的端口到端口之间的通信，tcp和upd协议就是在这一层
  - 补充：端口范围0-65535，0-1023为系统占用端口
  
5.会话层：
  - 上面的传输层只负责根据端口建立应用之间的联系，而会话层则负责管理这些连接的建立，通信和终止
  
6.表示层：
  - 这一层负责将应用层送下来or会话层送上去的数据进行格式的统一处理（编码解码之类的），就是说让两个不同的主机的应用之间可以无视数据包格式不一致的问题
  
7.应用层：
  - 这一层用于规定用户自己的应用的数据格式（就是所谓协议），这样送给表示层方便它处理，常见的协议有http https ftp pop3等
