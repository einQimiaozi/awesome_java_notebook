## 1. 并发

- 并发是指宏观上在一段时间内能同时运行多个程序，而并行则指同一时刻能运行多个指令。

- 并行需要硬件支持，如多流水线、多核处理器或者分布式计算系统。

## 2. 虚拟

- 主要有两种虚拟技术：时（时间）分复用技术和空（空间）分复用技术。

- 多个进程能在同一个处理器上并发执行使用了时分复用技术，让每个进程轮流占用处理器，每次只执行一小个时间片并快速切换。

- 虚拟内存使用了空分复用技术，它将物理内存抽象为地址空间，每个进程都有各自的地址空间。

## 操作系统的基本功能

  - 1. 进程管理：进程控制、进程同步、进程通信、死锁处理、处理机调度等。

  - 2. 内存管理：内存分配、地址映射、内存保护与共享、虚拟内存等。

  - 3. 文件管理：文件存储空间的管理、目录管理、文件读写管理和保护等。

  - 4. 设备管理：完成用户的 I/O 请求，方便用户使用各种设备，并提高设备的利用率。主要包括缓冲管理、设备分配、设备处理、虛拟设备等。

## 宏内核和微内核

  - 1. 宏内核：宏内核是将操作系统功能作为一个紧密结合的整体放到内核。由于各模块共享信息，因此有很高的性能。

  - 2. 微内核：由于操作系统不断复杂，因此将一部分操作系统功能移出内核，从而降低内核的复杂性。
  
  移出的部分根据分层的原则划分成若干服务，相互独立。在微内核结构下，操作系统被划分成小的、定义良好的模块，只有微内核这一个模块运行在内核态，其余模块运行在用户态。
  
  因为需要频繁地在用户态和核心态之间进行切换，所以会有一定的性能损失。
  
## 中断分类

  - 1. 外中断：由 CPU 执行指令以外的事件引起，如 I/O 完成中断，表示设备输入/输出处理已经完成，处理器能够发送下一个输入/输出请求。此外还有时钟中断、控制台中断等。

  - 2. 异常：由 CPU 执行指令的内部事件引起，如非法操作码、地址越界、算术溢出等。

  - 3. 陷入：在用户程序中使用系统调用。

### pipe，fifo和消息队列的区别
  - fifo和pipe在管道开启之前必须发送端和接收端的两个进程都准备就绪，消息队列则可以不需要接收端准备，发送端也可以发送
  - IPC的持续性不同。管道和FIFO是随进程的持续性，当管道和FIFO最后一次关闭发生时，仍在管道和FIFO中的数据会被丢弃。消息队列是随内核的持续性，即一个进程向消息队列写入消息后，然后终止，另外一个进程可以在以后某个时刻打开该队列读取消息。只要内核没有重新自举，消息队列没有被删除。

### 死锁产生的条件(cyc2018里写的不太对)
  - 互斥条件：临界资源是独占资源，进程应互斥且排他的使用这些资源。
  - 占有和等待条件：进程在请求资源得不到满足而等待时，不释放已占有资源。
  - 不剥夺条件：又称不可抢占，已获资源只能由进程自愿释放，不允许被其他进程剥夺。
  - 循环等待条件：又称环路条件，存在循环等待链，其中，每个进程都在等待链中等待下一个进程所持有的资源，造成这组进程处于永远等待状态。

## 死锁恢复
  - 资源剥夺法：剥夺陷于死锁的进程所占用的资源，但并不撤销此进程，直至死锁解除。
  - 进程回退法：根据系统保存的检查点让所有的进程回退，直到足以解除死锁，这种措施要求系统建立保存检查点、回退及重启机制。
  - 进程撤销法
    - 撤销陷入死锁的所有进程，解除死锁，继续运行。
    - 逐个撤销陷入死锁的进程，回收其资源并重新分配，直至死锁解除。
